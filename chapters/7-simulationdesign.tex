\chapter{Simulation Design}
\label{cap:simulationdesign}

% why the cma-es attack -> only attack which scales linear with increasing k 

all training sets and test sets are random generated by pseudo-random numbers generator libraries.

% python numpy
% hpc up to 700 cores simultaniously 
% mathematica plots

\section{\ac{PUF} Design}
\label{sec:pufsimulation}

The simulation of the \apuf uses randomly chosen normal distributed values with zero mean and given variance for delay difference values $\delta$ that represent the \apuf.
This is a common approach for random values whose distribution is unknown.  %? https://en.wikipedia.org/wiki/Normal_distribution
The different noise values added in $\ref{equ:pufresponse}$ are also normal distributed random values with zero mean and given variance.
The distribution $\ref{equ:stagenoisedistribution}$ where the noise of the stages is chosen from scales by the size of the \apuf $\gls{n}$.
The distributions of the delay difference values and all noise values depend for a physical \apuf implementation on the used electronic components, as shown in Sec. \ref{sec:physical}.
The ratio between $\sigmaSNoise$ and $\sigmaModel$ and the value of $\sigmaANoise$ determines the stability of the challenges of the \apuf.
As this work studies the impact of adding \ac{MV} to \apufs the real ration does not matter.
Hence it crucial not to changed the ration during the simulation to grain results that are comparable.
The response of the \apuf model is calculated by \ref{equ:pufmodelc} or \ref{equ:pufmodelw} before the noise values are added.
For the attack simulation \ref{equ:pufmodelw} is used since the delay vector $\gls{w}$ is approximated explained in Sec. \ref{sec:machinelearningdesign}.

%========================================
% -normal dist to choose delay difference values
% -Noise added by normal distributed values as in equ.
% -stage Noise got scaled by sqrt of n
% -addition arbiter noise added
% -Sigma Model to sigma noise relation + Arbiter noise 
% --> this relates on the electrical components used for the implementation
% --> as this work is a comparison it is crucial not to change the relation to gain results that are comparable!
% (+ set Ref in Chap 7 beginning)
% -response calculated by equ bla und bla ref to math section
% -For the attack equ bla is used as the weight vector w is approximated described in sec \ref{sec:machinelearningdesign}

\section{Machine Learning Design}
\label{sec:machinelearningdesign}



The number of evaluation $\gls{j}$ is the number of times a challenge is evaluated by the same \apuf and its responses $\gls{r}$ captured to calculate it reliability $\gls{h}$.
Against the definition of stability \ref{equ:stability}, in terms of the reliability based \ac{CMA-ES} attack, the reliability has a different definition.
The reliability $\gls{h}$ of a challenge $\gls{c}$ is computed of its responses $r_1, r_2, ..., r_j$ by

\begin{align}
h &= |\frac{j}{2} - \sum_{i = 1}^{j}r_i|. \label{equ:reliability}
\end{align}


% reliability based: becker!!!!
% As all known Arbiter PUF implementations suffer from a portion of challenges that do not provide stable responses [10], Why-Attacks-Lose
% -> move to Simulation Design!!!!
% Then the reliability hi is computed for challenge blub using the following formula: becker
% Definition: reliability $\gls{h}$ \cite{Becker2015ThePUFs}


explain Sigma and what it limits!

When attacking a puf it does not matter if the rated puf models are sorted descending or ascending as the responses are just boolean values.
when using the described fitness function
depending on wether the alg want so find a minimum or a maximum
minimum search


normal CMA-ES

two stage CMA-ES

achieved? For the reliability based \ac{CMA-ES} attack on \apufs it is crucial to find challenges which evaluate differently at multiple evaluations as explained in Sec. \ref{sec:machinelearningdesign}.

% Why ES-CMA
%========================================
